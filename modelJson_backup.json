{
  "component": "SingleView",
  "hideLeftPane": true,
  "viewQuery": {
    "actionName": "ACTIVE_INSTRUMENTS_LIST",
    "dataResponse": "ArrayInRoot",
    "endPointParams": []
  },
  "view_definition": [
    {
      "type": "reportTitle",
      "title": {
        "label_en": "Active Instruments",
        "label_es": "Instrumentos Activos"
      }
    },
    {
      "type": "parentReadOnlyTable",
      "allowMultiSelection": false,
      "refreshable": {
        "enable": true
      },
      "printable": {
        "enable": true
      },
      "downloadable": {
        "enable": true
      },
      "allowUserHideColumns": true,
      "allowChangeColumnsSize": true,
      "searchByfullText": true,
      "columns": [
        {
          "name": "name",
          "label_en": "Name",
          "label_es": "Nombre",
          "addToSmartFilter": true
        },
        {
          "name": "family",
          "label_en": "Family",
          "label_es": "Familia",
          "addToSmartFilter": true
        },
        {
          "name": "on_line",
          "label_en": "On line",
          "label_es": "En línea",
          "addToSmartFilter": true,
          "is_icon": true
        },
        {
          "name": "model_number",
          "label_en": "Model",
          "label_es": "Modelo",
          "addToSmartFilter": true
        },
        {
          "name": "serial_number",
          "label_en": "Serial N.",
          "label_es": "N. Serie",
          "addToSmartFilter": true
        },
        {
          "name": "supplier",
          "label_en": "Supplier",
          "label_es": "Proveedor",
          "addToSmartFilter": true
        },
        {
          "name": "manufacturer",
          "label_en": "Manufacturer",
          "label_es": "Fabricante",
          "addToSmartFilter": true
        },
        {
          "name": "created_on",
          "label_en": "Creation",
          "label_es": "Creación",
          "addToSmartFilter": true
        },
        {
          "name": "is_locked",
          "label_en": "Is locked?",
          "label_es": "¿Bloqueado?",
          "addToSmartFilter": true,
          "is_icon": true
        },
        {
          "name": "description",
          "label_en": "Description",
          "label_es": "Descripcción",
          "addToSmartFilter": false
        },
        {
          "name": "last_calibration",
          "label_en": "Last Cal",
          "label_es": "Última Cal",
          "addToSmartFilter": false
        },
        {
          "name": "next_calibration",
          "label_en": "Next Cal",
          "label_es": "Próxima Cal",
          "addToSmartFilter": false
        },
        {
          "name": "last_prev_maint",
          "label_en": "Last PM",
          "label_es": "Último PM",
          "addToSmartFilter": false
        },
        {
          "name": "next_prev_maint",
          "label_en": "Next PM",
          "label_es": "Próximo PM",
          "addToSmartFilter": false
        }
      ],
      "actions": [
        {
          "actionName": "NEW_INSTRUMENT",
          "requiresDialog": true,
          "endPointParams": [
            {
              "argumentName": "instrumentName",
              "element": "text1",
              "defaultValue": ""
            },
            {
              "argumentName": "familyName",
              "element": "list1",
              "defaultValue": "",
              "fieldType": "STRING"
            },
            {
              "argumentName": "modelNumber",
              "element": "text2",
              "defaultValue": ""
            },
            {
              "argumentName": "supplierName",
              "element": "list2",
              "defaultValue": "",
              "fieldType": "STRING"
            },
            {
              "argumentName": "serialNumber",
              "element": "text3",
              "defaultValue": ""
            },
            {
              "argumentName": "manufacturerName",
              "element": "list3",
              "defaultValue": "",
              "fieldType": "STRING"
            },
            {
              "argumentName": "responsible",
              "element": "list4",
              "defaultValue": "",
              "addToFieldNameAndValue": true,
              "notAddWhenValueIsBlank": true,
              "isAdhocField": true,
              "fieldType": "STRING"
            },
            {
              "argumentName": "responsible_backup",
              "element": "list5",
              "defaultValue": "",
              "addToFieldNameAndValue": true,
              "notAddWhenValueIsBlank": true,
              "isAdhocField": true,
              "fieldType": "STRING"
            },
            {
              "argumentName": "poDate",
              "element": "date1",
              "defaultValue": "",
              "optional": true
            },
            {
              "argumentName": "installationDate",
              "element": "date2",
              "defaultValue": ""
            }
          ],
          "button": {
            "icon": "create_new_folder",
            "title": {
              "label_en": "New",
              "label_es": "Nuevo"
            },
            "requiresGridItemSelected": false
          },
          "dialogInfo": {
            "name": "genericDialog",
            "fields": [
              {
                "text1": {
                  "label_en": "New Instrument Name",
                  "label_es": "Nombre para nuevo instrumento"
                }
              },
              {
                "list1": {
                  "label_en": "Family",
                  "label_es": "Familia",
                  "addBlankValueOnTop": true,
                  "addBlankValueAtBottom": false,
                  "valuesFromMasterData": {
                    "propertyNameContainer": "instruments_family",
                    "propertyKeyName": "name",
                    "propertyKeyValueEn": "name",
                    "propertyKeyValueEs": "name"
                  }
                }
              },
              {
                "text2": {
                  "label_en": "Model",
                  "label_es": "Modelo"
                }
              },
              {
                "list2": {
                  "items": [
                    {
                      "keyName": "LEICA",
                      "keyValue_en": "Leica Biosystems",
                      "keyValue_es": "Leica Biosystems"
                    },
                    {
                      "keyName": "PB INSTRUMENTS",
                      "keyValue_en": "PB Instruments",
                      "keyValue_es": "PB Instruments"
                    },
                    {
                      "keyName": "METTLER",
                      "keyValue_en": "Mettler Toledo",
                      "keyValue_es": "Mettler Toledo"
                    },
                    {
                      "keyName": "PERKIN ELMER",
                      "keyValue_en": "Perkin Elmer",
                      "keyValue_es": "Perkin Elmer"
                    },
                    {
                      "keyName": "AGILENT",
                      "keyValue_en": "Agilent",
                      "keyValue_es": "Agilent"
                    },
                    {
                      "keyName": "WATERS",
                      "keyValue_en": "Waters",
                      "keyValue_es": "Water"
                    }
                  ],
                  "label_en": "Supplier",
                  "label_es": "Proveedor"
                }
              },
              {
                "text3": {
                  "label_en": "Serial Number",
                  "label_es": "Número de Serie"
                }
              },
              {
                "list3": {
                  "items": [
                    {
                      "keyName": "METTLER",
                      "keyValue_en": "Mettler Toledo",
                      "keyValue_es": "Mettler Toledo"
                    },
                    {
                      "keyName": "PERKIN ELMER",
                      "keyValue_en": "Perkin Elmer",
                      "keyValue_es": "Perkin Elmer"
                    },
                    {
                      "keyName": "AGILENT",
                      "keyValue_en": "Agilent",
                      "keyValue_es": "Agilent"
                    },
                    {
                      "keyName": "WATERS",
                      "keyValue_en": "Waters",
                      "keyValue_es": "Water"
                    }
                  ],
                  "label_en": "ManufacturerName",
                  "label_es": "Fabricante"
                }
              },
              {
                "list4": {
                  "label_en": "Responsible",
                  "label_es": "Responsable",
                  "optional": true,
                  "addBlankValueOnTop": true,
                  "addBlankValueAtBottom": false,
                  "valuesFromMasterData": {
                    "propertyNameContainer": "users",
                    "propertyKeyName": "user",
                    "propertyKeyValueEn": "user",
                    "propertyKeyValueEs": "user"
                  },
                  "dependencyFieldBehavior": [
                    {
                      "field": "list5",
                      "rule": "whenEmpty",
                      "resetValue": true,
                      "action": "hide"
                    }
                  ]
                }
              },
              {
                "list5": {
                  "label_en": "Responsible Backup",
                  "label_es": "Backup del responsable",
                  "optional": true,
                  "addBlankValueOnTop": true,
                  "addBlankValueAtBottom": false,
                  "valuesFromMasterData": {
                    "propertyNameContainer": "users",
                    "propertyKeyName": "user",
                    "propertyKeyValueEn": "user",
                    "propertyKeyValueEs": "user"
                  }
                }
              },
              {
                "date1": {
                  "label_en": "Purchase Date",
                  "label_es": "Fecha Compra",
                  "optional": true
                }
              },
              {
                "date2": {
                  "label_en": "Installation Date",
                  "label_es": "Fecha Instalación"
                }
              }
            ]
          }
        },
        {
          "actionName": "TURN_ON_LINE",
          "requiresDialog": false,
          "button": {
            "img": "activate.svg",
            "title": {
              "label_en": "Turn online",
              "label_es": "Poner en servicio"
            },
            "requiresGridItemSelected": true,
            "showWhenSelectedItem": {
              "column": "on_line",
              "value": false
            }
          },
          "endPointParams": [
            {
              "argumentName": "instrumentName",
              "selObjectPropertyName": "name"
            }
          ]
        },
        {
          "actionName": "TURN_OFF_LINE",
          "requiresDialog": false,
          "button": {
            "img": "deactivate.svg",
            "title": {
              "label_en": "Turn off-line",
              "label_es": "Poner fuera de uso"
            },
            "requiresGridItemSelected": true,
            "showWhenSelectedItem": {
              "column": "on_line",
              "value": true
            }
          },
          "endPointParams": [
            {
              "argumentName": "instrumentName",
              "selObjectPropertyName": "name"
            }
          ]
        },
        {
          "actionName": "START_CALIBRATION",
          "requiresDialog": false,
          "button": {
            "img": "inst_ev_type_calibration.svg",
            "title": {
              "label_en": "Start Calibration",
              "label_es": "Iniciar Calibración"
            },
            "requiresGridItemSelected": true
          },
          "endPointParams": [
            {
              "argumentName": "instrumentName",
              "selObjectPropertyName": "name"
            }
          ]
        },
        {
          "actionName": "START_PREVENTIVE_MAINTENANCE",
          "requiresDialog": false,
          "button": {
            "img": "inst_ev_type_preventive_maintenance.svg",
            "title": {
              "label_en": "Start Prev Maint",
              "label_es": "Iniciar Mant Prev"
            },
            "requiresGridItemSelected": true
          },
          "endPointParams": [
            {
              "argumentName": "instrumentName",
              "selObjectPropertyName": "name"
            }
          ]
        },
        {
          "actionName": "START_SERVICE",
          "requiresDialog": false,
          "button": {
            "img": "inst_ev_type_service.svg",
            "title": {
              "label_en": "Start Service",
              "label_es": "Iniciar Servicio"
            },
            "requiresGridItemSelected": true
          },
          "endPointParams": [
            {
              "argumentName": "instrumentName",
              "selObjectPropertyName": "name"
            }
          ]
        },
        {
          "actionName": "START_VERIFICATION",
          "endPoint": "/app/procs/InstrumentsAPIactions",
          "requiresDialog": false,
          "button": {
            "img": "inst_ev_type_verification.svg",
            "title": {
              "label_en": "Start Verification",
              "label_es": "Iniciar Verificación"
            },
            "requiresGridItemSelected": true
          },
          "endPointParams": [
            {
              "argumentName": "instrumentName",
              "selObjectPropertyName": "name"
            }
          ]
        },
        {
          "actionName": "DECOMMISSION_INSTRUMENT",
          "endPoint": "/app/procs/InstrumentsAPIactions",
          "endPointParams": [
            {
              "argumentName": "instrumentName",
              "selObjectPropertyName": "name"
            }
          ],
          "requiresDialog": false,
          "button": {
            "icon": "alarm_off",
            "title": {
              "label_en": "Decommission instrument",
              "label_es": "Retirar instrumento"
            },
            "requiresGridItemSelected": true
          }
        },
        {
          "actionName": "UNDECOMMISSION_INSTRUMENT",
          "endPoint": "/app/procs/InstrumentsAPIactions",
          "endPointParams": [
            {
              "argumentName": "instrumentName",
              "selObjectPropertyName": "name"
            }
          ],
          "button": {
            "icon": "alarm_add",
            "title": {
              "label_en": "Undecommission instrument",
              "label_es": "Recuperar instrumento"
            },
            "requiresGridItemSelected": false
          },
          "requiresDialog": true,
          "dialogInfo": {
            "name": "reactivateObjectDialog",
            "fieldsObject": {
              "queryNumDays": {
                "label_en": "Number of Days",
                "label_es": "Número de Días",
                "defaultFixValue": 7
              },
              "objectName": {
                "label_en": "Instrument to reactivate",
                "label_es": "Lote de Producción a Reactivar"
              }
            },
            "listDefinition": {
              "keyFldName": "name",
              "eachEntryTextGenerator": [
                {
                  "value": "Instrument: ",
                  "type": "fix"
                },
                {
                  "value": "name",
                  "type": "field"
                }
              ]
            },
            "viewQuery": {
              "actionName": "DECOMISSIONED_INSTRUMENTS_LAST_N_DAYS",
              "endPoint": "/app/procs/InstrumentsAPIqueries",
              "endPointParams": [
                {
                  "argumentName": "numDays",
                  "element": "queryNumDays",
                  "zzzfixValue": 7
                },
                {
                  "argumentName": "family",
                  "fixValue": "familyCorrecto"
                }
              ]
            },
            "action": []
          }
        },
        {
          "actionName": "INSTRUMENT_AUDIT_FOR_GIVEN_INSTRUMENT",
          "requiresDialog": true,
          "endPoint": "/app/procs/InstrumentsAPIqueries",
          "button": {
            "icon": "rule",
            "title": {
              "label_en": "Instrument Audit",
              "label_es": "Auditoría de Instrumento"
            },
            "requiresGridItemSelected": true
          },
          "zzzclientMethod": "getObjectAuditInfo",
          "endPointParams": [
            {
              "argumentName": "instrumentName",
              "selObjectPropertyName": "name"
            }
          ],
          "dialogInfo": {
            "name": "auditDialog",
            "hideDoButton": true,
            "automatic": true,
            "action": [
              {
                "actionName": "INSTRUMENTAUDIT_SET_AUDIT_ID_REVIEWED",
                "requiresDialog": false,
                "notGetViewData": true,
                "secondaryActionToPerform": {
                  "name": "getObjectAuditInfo",
                  "endPointParams": [
                    {
                      "argumentName": "instrumentName",
                      "selObjectPropertyName": "name"
                    }
                  ]
                },
                "endPointUrl": "Samples",
                "zzzclientMethod": "signAudit",
                "endPointParams": [
                  {
                    "argumentName": "instrumentName",
                    "selObjectPropertyName": "name"
                  },
                  {
                    "argumentName": "auditId",
                    "targetValue": true
                  }
                ]
              }
            ]
          }
        },
        {
          "actionName": "INSTRUMENT_ADDURLATTACHMENT",
          "requiresDialog": true,
          "button": {
            "icon": "add_link",
            "title": {
              "label_en": "Add Attachment",
              "label_es": "Añadir Adjunto"
            },
            "requiresGridItemSelected": true
          },
          "dialogInfo": {
            "name": "genericDialog",
            "fields": [
              {
                "text1": {
                  "label_en": "Doc Url",
                  "label_es": "Vínculo"
                }
              },
              {
                "text2": {
                  "label_en": "Title",
                  "label_es": "Título",
                  "optional": true
                }
              }
            ]
          },
          "endPointParams": [
            {
              "argumentName": "instrumentName",
              "selObjectPropertyName": "name"
            },
            {
              "argumentName": "url",
              "element": "text1",
              "defaultValue": ""
            },
            {
              "argumentName": "briefSummary",
              "element": "text2",
              "defaultValue": ""
            }
          ]
        },
        {
          "actionName": "REMOVE_ATTACHMENT",
          "requiresDialog": true,
          "button": {
            "icon": "link_off",
            "title": {
              "label_en": "Remove Attachment",
              "label_es": "Eliminar Adjunto"
            },
            "requiresGridItemSelected": true
          },
          "dialogInfo": {
            "name": "genericDialog",
            "gridContent": true,
            "dialogQuery": {
              "actionName": "GET_INSTR_ATTACHMENTS",
              "variableForData": "",
              "endPointParams": [
                {
                  "argumentName": "instrumentName",
                  "selObjectPropertyName": "name"
                }
              ],
              "xxxsubViewFilter": {
                "ER-FQ": [],
                "ER-MB": []
              }
            },
            "columns": [
              {
                "name": "file_link",
                "label_en": "Link",
                "label_es": "Vínculo",
                "width": "40%",
                "sort": false,
                "filter": true,
                "align": "left"
              },
              {
                "name": "brief_summary",
                "label_en": "Title",
                "label_es": "Título",
                "width": "40%",
                "sort": true,
                "filter": false
              }
            ],
            "langConfig": {
              "gridHeader": [
                {
                  "fldName": "file_link",
                  "label_en": "Link",
                  "label_es": "Vínculo",
                  "width": "40%",
                  "sort": false,
                  "filter": true,
                  "align": "left"
                },
                {
                  "fldName": "brief_summary",
                  "label_en": "Title",
                  "label_es": "Título",
                  "width": "40%",
                  "sort": false,
                  "filter": true,
                  "align": "left"
                }
              ]
            },
            "automatic": true
          },
          "dialogInfo2": {
            "name": "genericDialog",
            "fields": [
              {
                "text1": {
                  "label_en": "Doc Url",
                  "label_es": "Vínculo"
                }
              }
            ]
          },
          "endPointParams": [
            {
              "argumentName": "instrumentName",
              "selObjectPropertyName": "name"
            },
            {
              "argumentName": "attachmentId",
              "selObjectPropertyName": "id",
              "getFromGrid": true
            }
          ]
        },
        {
          "actionName": "OPEN_ATTACHMENTS",
          "requiresDialog": true,
          "button": {
            "icon": "attach_file",
            "title": {
              "label_en": "Open Attachments",
              "label_es": "Abrir Adjuntos"
            },
            "requiresGridItemSelected": true
          },
          "dialogInfo": {
            "name": "genericDialog",
            "filesListContent": true,
            "hideCloseButton": true,
            "dialogQuery": {
              "actionName": "GET_INSTR_ATTACHMENTS",
              "variableForData": "",
              "endPointParams": [
                {
                  "argumentName": "instrumentName",
                  "selObjectPropertyName": "name"
                },
                {
                  "argumentName": "family",
                  "selObjectPropertyName": "family"
                }
              ]
            }
          },
          "endPointParams": [
            {
              "argumentName": "instrumentName",
              "selObjectPropertyName": "instrument"
            },
            {
              "argumentName": "family",
              "selObjectPropertyName": "family"
            },
            {
              "argumentName": "fileUrl",
              "element": "text1",
              "defaultValue": ""
            }
          ]
        },
        {
          "actionName": "NEW_INVESTIGATION",
          "button": {
            "icon": "find_in_page",
            "requiresGridItemSelected": true,
            "title": {
              "label_es": "Crear Investigación",
              "label_en": "Create Investigation"
            }
          },
          "requiresDialog": false,
          "endPointParams": [
            {
              "argumentName": "objectToAddObjectType",
              "fixValue": "instrument"
            },
            {
              "argumentName": "objectToAddObjectName",
              "selObjectPropertyName": "name"
            }
          ]
        },
        {
          "actionName": "ADD_INVEST_OBJECTS",
          "requiresDialog": true,
          "button": {
            "icon": "loupe",
            "title": {
              "label_en": "Add to Investigation",
              "label_es": "Añadir a Investigación"
            },
            "requiresGridItemSelected": true
          },
          "endPointParams": [
            {
              "argumentName": "investigationId",
              "getFromGrid": true,
              "selObjectPropertyName": "id"
            },
            {
              "argumentName": "objectToAddObjectType",
              "fixValue": "instrument"
            },
            {
              "argumentName": "objectToAddObjectName",
              "selObjectPropertyName": "name"
            }
          ],
          "dialogInfo": {
            "name": "genericDialog",
            "gridContent": true,
            "columns": [
              {
                "name": "id",
                "label_en": "Investigation",
                "label_es": "Investigación",
                "width": "40%",
                "sort": false,
                "filter": true,
                "align": "left"
              },
              {
                "name": "created_on",
                "label_en": "Created on",
                "label_es": "F.Creación",
                "width": "40%",
                "sort": true,
                "filter": false
              }
            ],
            "langConfig": {
              "gridHeader": [
                {
                  "fldName": "id",
                  "label_en": "Investigation",
                  "label_es": "Investigación",
                  "width": "40%",
                  "sort": false,
                  "filter": true,
                  "align": "left"
                },
                {
                  "fldName": "created_on",
                  "label_en": "Created on",
                  "label_es": "F.Creación",
                  "width": "40%",
                  "sort": true,
                  "filter": false
                }
              ]
            },
            "dialogQuery": {
              "actionName": "OPEN_INVESTIGATIONS",
              "button": {
                "icon": "refresh",
                "title": {
                  "label_en": "Reload",
                  "label_es": "Recargar"
                },
                "requiresGridItemSelected": true
              }
            }
          }
        }
      ],
      "row_buttons": [
        {
          "actionName": "CHANGE_INSTRUMENT_FAMILY",
          "notGetViewData": true,
          "selectedItemPropertyName": "selectedItems",
          "requiresDialog": true,
          "certificationException": true,
          "secondaryActionToPerform": {
            "name": "refreshSelProcData"
          },
          "button": {
            "icon": "manage_accounts",
            "title": {
              "label_en": "Change Instrument Family",
              "label_es": "Cambiar Familia Instrumento"
            },
            "requiresGridItemSelected": false
          },
          "dialogInfo": {
            "name": "genericDialog",
            "fields": [
              {
                "list1": {
                  "label_en": "Family",
                  "label_es": "Familia",
                  "addBlankValueOnTop": true,
                  "addBlankValueAtBottom": false,
                  "valuesFromMasterData": {
                    "propertyNameContainer": "instruments_family",
                    "propertyKeyName": "name",
                    "propertyKeyValueEn": "name",
                    "propertyKeyValueEs": "name"
                  }
                }
              }
            ]
          },
          "endPointParams": [
            {
              "argumentName": "instrumentName",
              "selObjectPropertyName": "name"
            },
            {
              "argumentName": "newFamilyName",
              "element": "list1",
              "defaultValue": ""
            }
          ]
        }
      ]
    }
  ]
}